<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Gulp搭建web服务器并自动刷新 · 韩天伟</title><meta name="description" content="Gulp搭建web服务器并自动刷新"><meta name="keywords" content="Gulp搭建web服务器并自动刷新"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="http://www.hantianwei.com/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.hantianwei.com/atom.xml" title="韩天伟"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/hantianwei" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/hantianwei" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><!--postType 0-Index 1-Archive 2-Post--><div class="post"><article class="post-block"><h1 class="post-title">Gulp搭建web服务器并自动刷新</h1><div class="post-info"><img src="http://www.hantianwei.com/images/date-icon.png" class="date-icon">2017年8月30日<span class="author info">Tianwei</span><img src="http://www.hantianwei.com/images/cate-icon.png" class="category-icon"><i class="fa fa-tag"><a href="/categories/Dev/" title="Dev" class="tag">Dev </a></i></div><div class="post-content"><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul>
<li>现在应用angularjs或VUE等框架可以实现前后端完全分离式开发，开发过程中也可以用到轻量级的文本编辑器来实现，需要一个简单的本地开发调试环境，想到了IIS、Gulp等，在非Windows下Gulp是很好的应用，还可以打包和压缩js、css等，每改一次去手动刷新的情况也可以避免，只要改动完保存下就可以实现自动刷新</li>
</ul>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ul>
<li><p>首先要安装nodeJs,这个就不介绍了，接下来我们安装gulp 和 gulp-connect</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp gulp-connect</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global livereload</span><br></pre></td></tr></table></figure>
<p>这三个命令执行完后，安装就完成了</p>
</li>
</ul>
<h2 id="WebServer实现"><a href="#WebServer实现" class="headerlink" title="WebServer实现"></a>WebServer实现</h2><ul>
<li>安装完成后我们需要在需要在开发目录中加入配置文件 gulpfile.js</li>
<li><p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var gulp = require(<span class="string">'gulp'</span>);</span><br><span class="line">var connect = require(<span class="string">'gulp-connect'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'watch'</span>, function() &#123;</span><br><span class="line">  gulp.watch(<span class="string">'./*.html'</span>, [<span class="string">'html'</span>]);</span><br><span class="line">  gulp.watch(<span class="string">'./css/**/*.css'</span>, [<span class="string">'css'</span>]);</span><br><span class="line">  gulp.watch(<span class="string">'./img/**/*.&#123;png,jpg,gif&#125;'</span>, [<span class="string">'images'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'webserver'</span>, function() &#123;</span><br><span class="line">  connect.server(&#123;</span><br><span class="line">    livereload: <span class="keyword">true</span>,</span><br><span class="line">    port: <span class="number">8066</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'html'</span>, function() &#123;</span><br><span class="line">  gulp.src(<span class="string">'./*.html'</span>)</span><br><span class="line">    .pipe(connect.reload());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'css'</span>, function() &#123;</span><br><span class="line">  gulp.src(<span class="string">'./css/**/*.css'</span>)</span><br><span class="line">    .pipe(connect.reload());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'images'</span>, function() &#123;</span><br><span class="line">  gulp.src(<span class="string">'./img/**/*.&#123;png,jpg,gif&#125;'</span>)</span><br><span class="line">    .pipe(connect.reload());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'webserver'</span>, <span class="string">'watch'</span>]);</span><br></pre></td></tr></table></figure>
</li>
<li><p>到此配置完毕，我们可以运行 gulp 来体验一下，用Atom打开html编辑下看看，修改自动变化</p>
</li>
</ul>
</div><span class="tags">Tags:</span><i class="fa fa-tag"><a href="/tags/nodejs/" title="nodejs" class="tag">nodejs </a><a href="/tags/gulp/" title="gulp" class="tag">gulp </a><a href="/tags/livereload/" title="livereload" class="tag">livereload </a></i></article></div></main><footer><div class="paginator"><a href="/2017/11/101/sonar-windows-cmd-bat/" class="prev">上一篇</a><a href="/2017/08/101/mac-os-maven-setting/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://www.hantianwei.com">Tianwei</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/hantianwei/hexo" target="_blank">apollo</a>.</p></div></footer></div></body></html>